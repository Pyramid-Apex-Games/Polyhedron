
UImenu "main" [
	uieschide (! $mainmenu)
	uihlist 0 [
		uivlist 0 [
			uifill $.UI_pad_D3XL
			UIbutton "hold2" [ uitext "Experience SchizoMania!" 0.6 ] 0 $.UI_pad_6XL [ hideui $uiname ; showui "start_chapter_book" ]
			UIbutton "hold2" [ uitext "Continue Experience" 0.6 ] 0 $.UI_pad_6XL [ hideui $uiname ; showui "continue_chapter_book" ]
			UIbar 1 0 0 $.UI_pad_L
			UIbutton "hold2" [ uitext "Create New Map" 0.6 ] 0 $.UI_pad_6XL [ hideui $uiname ; showui "dialog_newmap" ]
			UIbar 1 0 0 $.UI_pad_L
			//UIbutton "hold2" [ uitext "Player Setup"   0.6 ] 0 $.UI_pad_6XL [ hideui $uiname ; showui "player_setup" ]
			UIbutton "hold2" [ uitext "Options"        0.6 ] 0 $.UI_pad_6XL [ hideui $uiname ; showui "options" ]
			UIbutton "hold2" [ uitext "Controls"       0.6 ] 0 $.UI_pad_6XL [ hideui $uiname ; showui "keybinds" ]
			if $mainmenu [
				UIbutton "hold2" [ uitext "Credits"    0.6 ] 0 $.UI_pad_6XL [ hideui $uiname ; showui "credits" ]
			]
			UIbar 1 0 0 $.UI_pad_L
			if $mainmenu [
				UIbutton "hold2" [ uitext "Quit"           0.6 ] 0 $.UI_pad_6XL [
					if $confirmquit [ hideui $uiname ; showui "dialog_quit" ] quit
				] 
			] [
				UIbutton "hold2" [ uitext "Disconnect" 0.6 ] 0 $.UI_pad_6XL [
					trydisconnect
				] 
			]
			uiclamp* 1 1
		]
	]
]

// UImenu "newmap" [ uititle [ "New Map" ] 0.8 ] [
//    uispace 0.008 0.015 [
//       uivlist 0 [
//          uifill 0.5 0.032 [
//             uitext (concatword "^f8/newmap " (? (!= $UI_mapscale 10) $UI_mapscale)) 0.7
//             uialign* -1 0
//             uioutline $c_line ; uiclamp- 1 1 1 1
//          ]
//          uifill 0 0.025
//          uihlist 0.01 [
//             uitext "MapScale" 0.6
//             UIhslider UI_mapscale 10 16 1 0.5 0.032 [uitext $UI_mapscale 0.6]
//             uialign* -1 0
//          ]
//          uifill 0 0.025
//          UIbutton "" [uitext (concatword (? (= $isconnected 1) (? (! $editing) "^f4")) "New") 0.6] 0.12 0.06 [hideui "newmap" ; newmap $UI_mapscale]
//       ]
//    ]
// ] [] [] [] "New Map"

UImenu "dialog_newmap" [
	uispace 0.008 0.015 [
		uivlist 0 [
			uihlist 0.01 [
				UIbar 1
				uispace $.UI_pad_L 0 [
					UIbasicfield .savemapname 32 [] 0.7
				]
			]
			uifill 0 0.025
			//local speccolor 
			//local hue
			//local color
			//UIhspectrumslider $speccolor 0 255 0.25 0.025 [ $color = (/(* $speccolor hue) 255)]
			//uifill 0 0.025
			//UIhcolorslider $hue 0 255 0x000000 0xFFFFFF 0.25 0.025 [ echo $color ; $skyboxcolour = HSV_to_RGB24 [@color] ]
			uihlist 0.0025 [
				UIbutton "hold2" [ uitext "Create" 0.6 ] 0 $.UI_pad_6XL [
					newmap 10 ; savemap $.savemapname; 
					hideui $uiname
				]
				UIbutton "hold2" [ uitext "Cancel" 0.6 ] 0 $.UI_pad_6XL [
						hideui $uiname
				]
			]
		]
	]
] [] [] [] [ uitext "New Map" 0.8 ] 